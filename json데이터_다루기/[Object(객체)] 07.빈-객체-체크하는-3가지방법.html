<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[Object(객체)] 07.빈-객체-체크하는-3가지방법</title>

</head>

<body>
  <header>
    <h2>[Object(객체)] 07.빈 객체 체크하는 3가지 방법</h2>
    <p>
      Object.keys() 함수<br />
      반복문 사용하기<br />
      lodash library 사용하기
    </p>
  </header>

  <script>
    /*---------------------------------------------------------------------
      1. Object.keys() 함수
    ---------------------------------------------------------------------*/
    function isEmptyObj(obj) {
      if (obj.constructor === Object // 데이터가 객체인지 체크하기 위해서 constructor를 체크
        && Object.keys(obj).length === 0) { // Object.keys() 함수는 파라미터로 입력받은 객체의 key 목록을 배열로 리턴
        //만약 Object.keys()를 호출한 결과 배열의 길이가 0이면 비어있는 객체
        return true;
      }

      return false;
    }

    const obj1 = {};
    const obj2 = { name: 'js' };
    const str = "Javascript";

    document.writeln(isEmptyObj(obj1)); // true
    document.writeln(isEmptyObj(obj2)); // false
    document.writeln(isEmptyObj(str));  // false


    /*---------------------------------------------------------------------
      2. 반복문 사용하기
    ---------------------------------------------------------------------*/
    function isEmptyObj(obj) {
      // 객체 타입체크
      if (obj.constructor !== Object) {
        //앞의 예제와 마찬가지로 데이터 타입 체크를 위해 constructor를 이용
        return false;
      }

      // property 체크
      for (let prop in obj) {
        //객체의 모든 속성(property)을 순회하기 위해서는 for...in 구문을 사용

        if (obj.hasOwnProperty(prop)) {
          //for...in 구문을 이용하면 프로토타입 체인을 따라서 상속되는 프로퍼티들까지 모두 순회합니다.
          //(위 예제에서는 상속되는 프로퍼티가 없긴 합니다.)
          //따라서, 그 속성(property)을 제외하고 체크하기 위해서 hasOwnPropery() 함수를 한번 더 활용

          return false;
        }
      }

      return true;
    }

    const obj3 = {};
    const obj4 = { name: 'js' };
    const str1 = "Javascript";

    document.writeln(isEmptyObj(obj3)); // true
    document.writeln(isEmptyObj(obj4)); // false
    document.writeln(isEmptyObj(str1));  // false


    /*---------------------------------------------------------------------
      3. lodash library 사용하기
    ---------------------------------------------------------------------*/
    function isEmptyObj(obj) {

      if (obj.constructor === Object
        && _.isEmpty(obj)) {
        //lodash의 isEmpty() 함수는
        //object, collection, map, set이 비어있는지를 체크해주는 함수입니다.
        //간단하게 이 lodash의 isEmpty() 함수를 사용할 수도 있습니다.

        return true;
      }
      return false;
    }

    const obj5 = {};
    const obj6 = { name: 'js' };
    const str2 = "Javascript";

    document.writeln(isEmptyObj(obj5)); // true
    document.writeln(isEmptyObj(obj6)); // false
    document.writeln(isEmptyObj(str2));  // false
  </script>
</body>

</html>