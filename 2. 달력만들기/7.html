<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>과제 - 달력만들기 7단계</title>
</head>
<style>
  .calendar-tit {
    display: flex;
    align-items: center;
  }

  .calendar-tit h2 {
    margin: 0 20px;
  }

  .calendar-body {
    width: 235px;
    display: flex;
    flex-wrap: wrap;
    padding: 0;
    border: 1px solid black;
  }

  .calendar-body li {
    width: 30px;
    height: 30px;
    text-align: center;
    display: table-cell;
    border: 1px solid red;
  }
</style>

<body>

  <div id="calendar">
    <header class="calendar-tit">
      <button type="button" class="perv-month">
        이전 </button>
      <h2 class="month"></h2>
      <button type="button" class="next-month"> 다음 </button>
    </header>
    <ul class="calendar-body">
    </ul>
  </div>

  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script>
    //  =이거는 완전히 대입이구
    // +=이게 원래 있는거에 더해주는 식

    // date객체.getFullYear()             년도를 4자리로 얻어낸다.
    // date객체.getMonth()                월을 얻어낸다. (0~11)
    // date객체.getDate()                 일을 얻어낸다.
    // date객체.getHours()                시각을 얻어낸다.
    // date객체.getMinites()              분을 얻어낸다.
    // date객체.getSeconds()              초를 얻어낸다.
    // date객체.getDay()                  요일을 얻어낸다. (일요일=0, 토요일=6)
    // date객체.getTime()                 타임스탬프를 얻어낸다.
    //                                      타임스탬프란, 1970년 1월 1일 자정을 기준으로 해당 순간까지 경과한 총 밀리세컨드.



    // 문제 
    // 7) 콘솔창에 그려진 달력을 HTML문서로 나타내세요.

    // --------------------------------------------------------------------------------------

    $(document).ready(function () {
      calendar();
      pervMonth();
      nextMonth();
    });

    var date = new Date();

    function pervMonth() {
      $('.perv-month').click(function () {
        date = new Date(date.getFullYear(), date.getMonth() - 1, date.getDate()); //이전
        $(".calendar-body li").remove();
        calendar();
      });
    }

    function nextMonth() {
      $('.next-month').click(function () {
        date = new Date(date.getFullYear(), date.getMonth() + 1, date.getDate()); //다음
        $(".calendar-body li").remove();
        calendar();
      });
    }


    function calendar() {
      var arr = '';
      var toYear = date.getFullYear();
      var toMonth = date.getMonth();
      // var toMonth = 11;

      //이달 구하기
      var firstDay = new Date(toYear, toMonth, 1).getDay(); //이 달 1일 요일 구하기
      var lastDate = new Date(toYear, toMonth + 1, 0).getDate(); // 이 달의 마지막 날짜 구하기
      var lastDay = new Date(toYear, toMonth, lastDate).getDay(); // 이 달의 마지막 요일 구하기

      console.log("1일 요일", firstDay);
      console.log("이달 마지막 날짜", lastDate);
      console.log("마지막 요일", lastDay);

      // 해당 월 -----------------------------------------------------------------
      var month = toYear + "년" + (toMonth + 1) + "월";
      $('.month').text(month);
      console.log('해당 월', month);

      // 첫번째 줄 빈칸(10월기준 5개) ---------------------------------------------
      for (var bin = 0; bin < firstDay; bin++) {
        arr += "[ ]";
        $(".calendar-body").append("<li></li>");
      }
      console.log('빈칸', bin);

      // 날짜 ----------------------------------------------------------------------
      for (var i = 1; i <= lastDate; i++) {
        $(".calendar-body").append("<li class='date'>" + i + "</li>");
        getday = new Date(toYear, toMonth, i).getDay(); // 요일을 얻어낸다. (일요일=0, 토요일=6)
        // 다음행 이동
        if (getday == 0) {
          arr += "\n";
          // $(".calendar-body").append("<br/>");
        }
        arr += " " + i;
      }
      console.log(arr);
    }

  </script>

</body>

</html>